@page "/recipe/{id}"

@using Models
@using System
@using Microsoft.AspNetCore.Components
@using System.Linq
@inject Data.DataBase.DataContext _context
@inject Data.Services.ReceiptService _receiptService
@inject Data.Repositories.Interface.IAsyncRepository<Receipt> _receiptRepository
<style>
    h1 {text-align: center;}
    img {align-self: center;}
</style>

<h1>@receipt.Name</h1>
@if(!string.IsNullOrEmpty(receipt.ImageUrl))
{
    <img src=@receipt.ImageUrl alt="Italian Trulli" style="width:500px;">    
}
<br><br>

<h4>Descrição</h4>
<p>@receipt.Description</p>
<h4>Ingredientes</h4>
<table class="table">
    <thead>
        <tr>
            <th>Quantidade</th>
            <th>Ingrediente</th>
        </tr>
    </thead>
            <tbody>
                @foreach(var ingredient in receipt.Ingredients)
                {
                    <tr>
                        <td>@ingredient.Quantity</td>
                        <td>@ingredient.Ingredient</td>
                    </tr>
                }
            </tbody>
</table>

<h4>Passos</h4>
@foreach(var step in receipt.Steps)
{
    <p> - @step.Step</p>
}


@code {
    [Parameter]
    public string Id { get; set; }
    private Receipt receipt = new Receipt();
    private List<StepRecipe> steps = new List<StepRecipe>();
    private List<IngredientRecipe> ingredients = new List<IngredientRecipe>();

    protected override async Task OnInitializedAsync()
    {
        receipt = await _receiptRepository.FirstOrDefault(x => x.Id ==Guid.Parse(Id));
    }
}
